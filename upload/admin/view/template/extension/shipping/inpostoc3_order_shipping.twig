{{ header }}{{ column_left }}
<div id="content">
  <div class="page-header">
    <div class="container-fluid">
      <div class="pull-right">
        {% if inpostoc3_can_edit.shipment %}
        <button type="submit" form="form-inpostoc3-order-shipping" data-toggle="tooltip" title="{{ button_save }}" class="btn btn-primary" formaction="{{ action_save }}"><i class="fa fa-save"></i></button>
        {% endif %}
        <!-- <button type="submit" form="form-inpostoc3-order-shipping" data-toggle="tooltip" title="{{ button_shipping_print }}" class="btn btn-primary" formaction="{{ action_dispatch }}"><i class="fa fa-truck"></i></button> -->
        <a href="{{ cancel }}" data-toggle="tooltip" title="{{ button_cancel }}" class="btn btn-default"><i class="fa fa-reply"></i></a>
      </div>
      <h1>{{ heading_title_order_shipping }}</h1>
      <ul class="breadcrumb">
        {% for breadcrumb in breadcrumbs %}
        <li><a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a></li>
        {% endfor %}
      </ul>
    </div>
  </div>
  <div class="container-fluid">
    {% if error_warning %}
    <div class="alert alert-danger alert-dismissible"><i class="fa fa-exclamation-circle"></i> {{ error_warning }}
      <button type="button" class="close" data-dismiss="alert">&times;</button>
    </div>
    {% endif %}
    {% if shipping_code_inpostoc3_used %}
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title"><i class="fa 
        {% if inpostoc3_can_edit.shipment %}
        fa-pencil
        {% else %}
        fa-info-circle
        {% endif %}
        "></i>Order (#{{ order_id }})</h3>
      </div>
    </div>

    
    <!-- Shipments -->
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title"><i class="fa fa-list"></i>{{ text_shipments }}</h3>
      </div>
      <div class="panel-body">
        <!-- foreach shipment display div with shipment data + table with parcels-->
        {% for shipment in shipments %}
        <div class="align-items-center" id="shipment-{{ shipment.id }}">
          <table class="table table-bordered">
            <thead style="background-color: #f6f6f6;" class="panel-title">
              <tr>
                <td class="text-left text-uppercase">
                  {{ text_shipment_number }}: {{ shipment.number ?: text_none }}
                </td>
                <td class="text-left text-uppercase">
                  {{ text_shipment_tracking_number }}: {{ shipment.tracking_number ?: text_none }}
                </td>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td colspan="2">
                  
                  <table class="table table-condensed" style="width:33%; float: left;" id="shipment-{{ order_id }}">
                    <thead>
                      <tr><td>{{ text_sending_method_details }}</td></tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>
                        <div class="form-group row form-inline required" style="border-top: 0px; padding-top: 5px; padding-bottom: 5px;">
                          <label class="col-md-2 control-label" for="input-inpostoc3-service-{{order_id}}-{{ shipment.id }}">{{ text_service }}</label>
                          <div class="col-md-10">
                            {% if shipment.can_edit.sending_method_details %}
                            <select form="form-inpostoc3-order-shipping-{{ order_id }}-{{ shipment.id }}" required name="input-inpostoc3-service-{{order_id}}-{{ shipment.id }}" id="input-inpostoc3-service-{{order_id}}-{{ shipment.id }}" class="form-control" style="width: 100%;">
                              <option value="0"
                              {% if not shipment.service_id or shipment.service_id == 0 %}
                              selected="selected"
                              {% endif %}
                              >{{ text_none }}</option>
                              {% for service in inpost_services %}
                              <option value="{{ service.id }}" 
                                {% if shipment.service_id is same as (service.id) %}
                                selected="selected"
                                {% endif %}
                              >{{ attribute(_context,'text_' ~service.service_identifier~'_name') }}</option>
                              {% endfor %}              
                            </select>
                            {% else %}
                            {{ attribute(_context,'text_' ~shipment.service_identifier~'_name')  }}
                            {% endif %}
                          </div>
                        </div>
                        <div class="form-group row form-inline required" style="border-top: 0px; padding-top: 5px; padding-bottom: 5px;">
                          <label class="col-md-2 control-label" for="input-inpostoc3-sending-method-{{order_id}}-{{ shipment.id }}">{{ text_sending_method }}</label>
                          <div class="col-md-10">
                            {% if shipment.can_edit.sending_method_details %}
                            <select form="form-inpostoc3-order-shipping-{{ order_id }}-{{ shipment.id }}" required name="input-inpostoc3-sending-method-{{order_id}}-{{ shipment.id }}" id="input-inpostoc3-sending-method-{{order_id}}-{{ shipment.id }}" class="form-control" style="width: 100%;">
                              <option value="0"
                              {% if not shipment.custom_attributes.sending_method %}
                              selected="selected"
                              {% endif %}
                              >{{ text_none }}</option>
                              {% for service in inpost_services %}
                              {% if service.id == shipment.service_id %}
                              {% for sending_method in service.sending_methods %}
                              <option value="{{ sending_method.sending_method_id }}" 
                              {% if shipment.custom_attributes.sending_method is same as (sending_method.sending_method_identifier) %}
                              selected="selected"
                              {% endif %}
                              >{{ attribute(_context,'text_sending_method_' ~sending_method.sending_method_identifier) }}</option>
                              {% endfor %}
                              {% endif %}
                              {% endfor %}
                              <!-- after initial fill do the java script stuff here to fill sending methods according to selected service -->              
                            </select>
                            {% else %}
                            {{ attribute(_context,'text_' ~shipment.custom_attributes.sending_method~'_name')  }}
                            {% endif %}
                          </div>
                        </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>

                  <table class="table table-condensed" style="width:33%; float: left; background-color: #f6f6f6;" id="{{ order_id }}-{{ shipment.id }}-shipment">
                    <thead>
                      <tr><td>{{ text_send_from }}</td></tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td class="text-left">
                          <div class="form-group row form-inline" style="border-top: 0px; padding-top: 5px; padding-bottom: 5px;" id="{{ order_id }}-{{ shipment.id }}-dropoff-point">
                            <label class="col-md-3 control-label" for="input-inpostoc3-sender-selected-point-{{order_id}}-{{ shipment.id }}">{{ text_selected_sending_point }}</label>
                            <div class="col-md-9">
                              {% if shipment.can_edit.sending_method_details %}
                              <input type="button" form="form-inpostoc3-order-shipping-{{ order_id }}-{{ shipment.id }}" name="input-inpostoc3-sender-selected-point-{{order_id}}-{{ shipment.id }}" id="input-inpostoc3-sender-selected-point-{{order_id}}-{{ shipment.id }}" 
                              value=
                              {% if shipment.custom_attributes.dropoff_point is empty %}
                              "{{ text_click_to_select }}" 
                              {% else %}
                              "{{ shipment.custom_attributes.dropoff_point }}" 
                              {% endif %}
                              {% if shipment.custom_attributes.sending_method is not same as ("parcel_locker") %}
                              disabled 
                              {% endif %}
                              class="btn btn-primary form-control" style="width: 100%;" />
                              {% else %}
                              <span name="input-inpostoc3-sender-selected-point-{{order_id}}-{{ shipment.id }}" class="form-control">{{ shipment.custom_attributes.dropoff_point }}</span>
                              {% endif %}                              
                            </div>
                          </div>

                          {% if shipment.can_edit.sending_method_details %}
                          <div class="form-group row form-inline" style="border-top: 0px; padding-top: 5px; padding-bottom: 5px;">
                            <div class="col-md-12">
                              <select  name="input-inpostoc3-select-sender-{{order_id}}-{{ shipment.id }}" id="input-inpostoc3-select-sender-{{order_id}}-{{ shipment.id }}" class="form-control" style="width: 100%;">
                              <option value="0"
                              {% if not shipment.sender_id %}
                              selected="selected"
                              {% endif %}
                              >{{ text_addr_new }}</option>
                              
                              {% for a_sender in senders %}
                              <option value="{{ a_sender.id }}" 
                              {% if shipment.sender_id is same as (a_sender.id) %}
                              selected="selected"
                              {% endif %}
                              >{{ a_sender.name ?: entry_name }}</option>
                              {% endfor %}
                              </select>
                            </div>
                          </div>
						              {% endif %}


                          <div class="form-group row form-inline required" style="border-top: 0px; padding-top: 5px; padding-bottom: 5px;">
                            <label class="col-md-3 control-label" for="input-inpostoc3-sender-name-{{order_id}}-{{ shipment.id }}">{{ text_name }}</label>
                            <div class="col-md-9">
                              {% if shipment.can_edit.sending_method_details %}
                              <input type="text" form="form-inpostoc3-order-shipping-{{ order_id }}-{{ shipment.id }}" required name="input-inpostoc3-sender-name-{{order_id}}-{{ shipment.id }}" id="input-inpostoc3-sender-name-{{order_id}}-{{ shipment.id }}" 
                              value="{{ shipment.sender_id ? shipment.sender.name : sender.name }}"
                              placeholder="{{ text_name }}"  class="form-control" style="width: 100%;" />
                              {% else %}
                              <span name="input-inpostoc3-{{order_id}}-{{ shipment.id }}-sender-name" class="form-control">{{ shipment.sender.name }}</span>
                              {% endif %}     
                            </div>
                          </div>
                          <div class="form-group row form-inline" style="border-top: 0px; padding-top: 5px; padding-bottom: 5px;">
                            <label class="col-md-3 control-label" for="input-inpostoc3-sender-company-name-{{order_id}}-{{ shipment.id }}">{{ text_company_name }}</label>
                            <div class="col-md-9">
                              {% if shipment.can_edit.sending_method_details %}
                              <input type="text" form="form-inpostoc3-order-shipping-{{ order_id }}-{{ shipment.id }}" name="input-inpostoc3-sender-company-name-{{order_id}}-{{ shipment.id }}" id="input-inpostoc3-sender-company-name-{{order_id}}-{{ shipment.id }}" 
                              value="{{ shipment.sender_id ? shipment.sender.company_name : sender.company_name }}"
                              placeholder="{{ text_company_name }}"  class="form-control" style="width: 100%;" />
                              {% else %}
                              <span name="input-inpostoc3-sender-company-name-{{order_id}}-{{ shipment.id }}" class="form-control">{{ shipment.sender.company_name }}</span>
                              {% endif %}                              
                            </div>
                          </div>
                          <div class="form-group row form-inline required" style="border-top: 0px; padding-top: 5px; padding-bottom: 5px;">
                            <label class="col-md-3 control-label" for="input-inpostoc3-sender-first-name-{{order_id}}-{{ shipment.id }}">{{ text_first_name }}</label>
                            <div class="col-md-9">
                              {% if shipment.can_edit.sending_method_details %}
                              <input type="text" form="form-inpostoc3-order-shipping-{{ order_id }}-{{ shipment.id }}" required name="input-inpostoc3-sender-first-name-{{order_id}}-{{ shipment.id }}" id="input-inpostoc3-sender-first-name-{{order_id}}-{{ shipment.id }}" 
                              value="{{ shipment.sender_id ? shipment.sender.first_name : sender.first_name }}"
                              placeholder="{{ text_first_name }}"  class="form-control" style="width: 100%;" />
                              {% else %}
                              <span name="input-inpostoc3-sender-first-name-{{order_id}}-{{ shipment.id }}" class="form-control">{{ shipment.sender.first_name }}</span>
                              {% endif %}                              
                            </div>
                          </div>
                          <div class="form-group row form-inline required" style="border-top: 0px; padding-top: 5px; padding-bottom: 5px;">
                            <label class="col-md-3 control-label" for="input-inpostoc3-sender-last-name-{{order_id}}-{{ shipment.id }}">{{ text_last_name }}</label>
                            <div class="col-md-9">
                              {% if shipment.can_edit.sending_method_details %}
                              <input type="text" form="form-inpostoc3-order-shipping-{{ order_id }}-{{ shipment.id }}" required name="input-inpostoc3-sender-last-name-{{order_id}}-{{ shipment.id }}" id="input-inpostoc3-sender-last-name-{{order_id}}-{{ shipment.id }}" 
                              value="{{ shipment.sender_id ? shipment.sender.last_name : sender.last_name }}"  
                              placeholder="{{ text_last_name }}"  class="form-control" style="width: 100%;" />
                              {% else %}
                              <span name="input-inpostoc3-sender-last-name-{{order_id}}-{{ shipment.id }}" class="form-control">{{ shipment.sender.last_name }}</span>
                              {% endif %}                                  
                            </div>
                          </div>
                          <div class="form-group row form-inline required" style="border-top: 0px; padding-top: 5px; padding-bottom: 5px;">
                            <label class="col-md-3 control-label" for="input-inpostoc3-sender-phone-{{order_id}}-{{ shipment.id }}">{{ text_phone }}</label>
                            <div class="col-md-9">
                              {% if shipment.can_edit.sending_method_details %}
                              <input type="text" form="form-inpostoc3-order-shipping-{{ order_id }}-{{ shipment.id }}" required name="input-inpostoc3-sender-phone-{{order_id}}-{{ shipment.id }}" id="input-inpostoc3-sender-phone-{{order_id}}-{{ shipment.id }}" 
                              value="{{ shipment.sender_id ? shipment.sender.phone : sender.phone }}" 
                              placeholder="{{ text_phone }}"  class="form-control" style="width: 100%;" />
                              {% else %}
                              <span name="input-inpostoc3-sender-phone-{{order_id}}-{{ shipment.id }}" class="form-control">{{ shipment.sender.phone }}</span>
                              {% endif %}                         
                            </div>
                          </div>
                          <div class="form-group row form-inline required" style="border-top: 0px; padding-top: 5px; padding-bottom: 5px;">
                            <label class="col-md-3 control-label" for="input-inpostoc3-sender-email-{{order_id}}-{{ shipment.id }}">{{ text_email }}</label>
                            <div class="col-md-9">
                              {% if shipment.can_edit.sending_method_details %}
                              <input type="text" form="form-inpostoc3-order-shipping-{{ order_id }}-{{ shipment.id }}" required name="input-inpostoc3-sender-email-{{order_id}}-{{ shipment.id }}" id="input-inpostoc3-sender-email-{{order_id}}-{{ shipment.id }}" 
                              value="{{ shipment.sender_id ? shipment.sender.email : sender.email }}" 
                              placeholder="{{ text_email }}"  class="form-control" style="width: 100%;" />
                              {% else %}
                              <span name="input-inpostoc3-sender-email-{{order_id}}-{{ shipment.id }}" class="form-control">{{ shipment.sender.email }}</span>
                              {% endif %}                              
                            </div>                            
                          </div>
                          <div class="form-group row form-inline" style="border-top: 0px; padding-top: 5px; padding-bottom: 5px;">
                            <label class="col-md-3 control-label" for="input-inpostoc3-sender-addr-street-{{order_id}}-{{ shipment.id }}">{{ text_addr_street }}</label>
                            <div class="col-md-9">
                              {% if shipment.can_edit.sending_method_details %}
                              <input type="text" form="form-inpostoc3-order-shipping-{{ order_id }}-{{ shipment.id }}" required name="input-inpostoc3-sender-addr-street-{{order_id}}-{{ shipment.id }}" id="input-inpostoc3-sender-addr-street-{{order_id}}-{{ shipment.id }}" 
                              value="{{ shipment.sender_id ? shipment.sender.street : sender.street }}" 
                              placeholder="{{ text_addr_street }}"  class="form-control" style="width: 100%;" />
                              {% else %}
                              <span name="input-inpostoc3-sender-addr-street-{{order_id}}-{{ shipment.id }}" class="form-control">{{ shipment.sender.street }}</span>
                              {% endif %}                              
                            </div>
                          </div>
                          <div class="form-group row form-inline" style="border-top: 0px; padding-top: 5px; padding-bottom: 5px;">
                            <label class="col-md-3 control-label" for="input-inpostoc3-sender-addr-building-number-{{order_id}}-{{ shipment.id }}">{{ text_addr_building_number }}</label>
                            <div class="col-md-9">
                              {% if shipment.can_edit.sending_method_details %}
                              <input type="text" form="form-inpostoc3-order-shipping-{{ order_id }}-{{ shipment.id }}" required name="input-inpostoc3-sender-addr-building-number-{{order_id}}-{{ shipment.id }}" id="input-inpostoc3-sender-addr-building-number-{{order_id}}-{{ shipment.id }}" 
                              value="{{ shipment.sender_id ? shipment.sender.building_number : sender.building_number }}" 
                              placeholder="{{ text_addr_building_number }}"  class="form-control" style="width: 100%;" />
                              {% else %}
                              <span name="input-inpostoc3-sender-addr-building-number-{{order_id}}-{{ shipment.id }}" class="form-control">{{ shipment.sender.building_number }}</span>
                              {% endif %}                                
                            </div>
                          </div>
                          <div class="form-group row form-inline" style="border-top: 0px; padding-top: 5px; padding-bottom: 5px;">
                            <label class="col-md-3 control-label" for="input-inpostoc3-sender-addr-line-1-{{order_id}}-{{ shipment.id }}">{{ text_addr_line_1 }}</label>
                            <div class="col-md-9">
                              {% if shipment.can_edit.sending_method_details %}
                              <input type="text" form="form-inpostoc3-order-shipping-{{ order_id }}-{{ shipment.id }}" name="input-inpostoc3-sender-addr-line-1-{{order_id}}-{{ shipment.id }}" id="input-inpostoc3-sender-addr-line-1-{{order_id}}-{{ shipment.id }}" 
                              value="{{ shipment.sender_id ? shipment.sender.line1 : sender.line1 }}" 
                              placeholder="{{ text_addr_line_1 }}"  class="form-control" style="width: 100%;" />
                              {% else %}
                              <span name="input-inpostoc3-sender-addr-line-1-{{order_id}}-{{ shipment.id }}" class="form-control">{{ shipment.sender.line1 }}</span>
                              {% endif %}                                
                            </div>
                          </div>
                          <div class="form-group row form-inline" style="border-top: 0px; padding-top: 5px; padding-bottom: 5px;">
                            <label class="col-md-3 control-label" for="input-inpostoc3-sender-addr-line-2-{{order_id}}-{{ shipment.id }}">{{ text_addr_line_2 }}</label>
                            <div class="col-md-9">
                              {% if shipment.can_edit.sending_method_details %}
                              <input type="text" form="form-inpostoc3-order-shipping-{{ order_id }}-{{ shipment.id }}" name="input-inpostoc3-sender-addr-line-2-{{order_id}}-{{ shipment.id }}" id="input-inpostoc3-sender-addr-line-2-{{order_id}}-{{ shipment.id }}" 
                              value="{{ shipment.sender_id ? shipment.sender.line2 : sender.line2 }}" 
                              placeholder="{{ text_addr_line_2 }}"  class="form-control" style="width: 100%;" />
                              {% else %}
                              <span name="input-inpostoc3-sender-addr-line-2-{{order_id}}-{{ shipment.id }}" class="form-control">{{ shipment.sender.line2 }}</span>
                              {% endif %}                                
                            </div>
                          </div>
                          <div class="form-group row form-inline required" style="border-top: 0px; padding-top: 5px; padding-bottom: 5px;">
                            <label class="col-md-3 control-label" for="input-inpostoc3-sender-addr-city-{{order_id}}-{{ shipment.id }}">{{ text_addr_city }}</label>
                            <div class="col-md-9">
                              {% if shipment.can_edit.sending_method_details %}
                              <input type="text" form="form-inpostoc3-order-shipping-{{ order_id }}-{{ shipment.id }}" required name="input-inpostoc3-sender-addr-city-{{order_id}}-{{ shipment.id }}" id="input-inpostoc3-sender-addr-city-{{order_id}}-{{ shipment.id }}" 
                              value="{{ shipment.sender_id ? shipment.sender.city : sender.city }}" 
                              placeholder="{{ text_addr_city }}"  class="form-control" style="width: 100%;" />
                              {% else %}
                              <span name="input-inpostoc3-sender-addr-city-{{order_id}}-{{ shipment.id }}" class="form-control">{{ shipment.sender.city }}</span>
                              {% endif %}                               
                            </div>
                          </div>
                          <div class="form-group row form-inline" style="border-top: 0px; padding-top: 5px; padding-bottom: 5px;">
                            <label class="col-md-3 control-label" for="input-inpostoc3-sender-addr-post-code-{{order_id}}-{{ shipment.id }}">{{ text_addr_post_code }}</label>
                            <div class="col-md-9">
                              {% if shipment.can_edit.sending_method_details %}
                              <input type="text" form="form-inpostoc3-order-shipping-{{ order_id }}-{{ shipment.id }}" name="input-inpostoc3-sender-addr-post-code-{{order_id}}-{{ shipment.id }}" id="input-inpostoc3-sender-addr-post-code-{{order_id}}-{{ shipment.id }}" 
                              value="{{ shipment.sender_id ? shipment.sender.post_code : sender.post_code }}" 
                              placeholder="{{ text_addr_post_code }}"  class="form-control" style="width: 100%;" />
                              {% else %}
                              <span name="input-inpostoc3-sender-addr-post-code-{{order_id}}-{{ shipment.id }}" class="form-control">{{ shipment.sender.post_code }}</span>
                              {% endif %}                             
                            </div>
                          </div>
                          <div class="form-group row form-inline" style="border-top: 0px; padding-top: 5px; padding-bottom: 5px;">
                            <label class="col-md-3 control-label" for="input-inpostoc3-sender-addr-country-code-{{order_id}}-{{ shipment.id }}">{{ text_addr_country_code }}</label>
                            <div class="col-md-9">
                              <span name="input-inpostoc3-sender-addr-country-code-{{order_id}}-{{ shipment.id }}" class="form-control" id="input-inpostoc3-sender-addr-country-code-{{order_id}}-{{ shipment.id }}">{{ shipment.sender.country_iso_code_2 }}</span>                             
                            </div>
                          </div>
                        </td>

                      </tr>
                    </tbody>
                  </table>

                  <table class="table table-condensed" style="width:33%; float: left;" id="shipment-{{ order_id }}">
                    <thead>
                      <tr><td>{{ text_send_to }}</td></tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td class="text-left">
                          <div class="form-group row form-inline" style="border-top: 0px; padding-top: 5px; padding-bottom: 5px;" id="{{ order_id }}-{{ shipment.id }}-target-point">
                            <label class="col-md-3 control-label" for="input-inpostoc3-receiver-selected-point-{{order_id}}-{{ shipment.id }}">{{ text_selected_target_point }}</label>
                            <div class="col-md-9">
                              {% if shipment.can_edit.sending_method_details %}
                              <input type="button" form="form-inpostoc3-order-shipping-{{ order_id }}-{{ shipment.id }}" name="input-inpostoc3-receiver-selected-point-{{order_id}}-{{ shipment.id }}" id="input-inpostoc3-receiver-selected-point-{{order_id}}-{{ shipment.id }}" 
                              value=
                              {% if shipment.custom_attributes.target_point is empty %}
                              "{{ text_click_to_select }}" 
                              {% else %}
                              "{{ shipment.custom_attributes.target_point }}" 
                              {% endif %}
                              {% if shipment.service_id is not same as("1") %}
                              disabled 
                              {% endif %}
                              class="btn btn-primary form-control" style="width: 100%;" />
                              {% else %}
                              <span name="input-inpostoc3-receiver-selected-point-{{order_id}}-{{ shipment.id }}" class="form-control">{{ shipment.custom_attributes.target_point }}</span>
                              {% endif %}                              
                            </div>
                          </div>

                          <div class="form-group row form-inline required" style="border-top: 0px; padding-top: 5px; padding-bottom: 5px;">
                            <label class="col-md-3 control-label" for="input-inpostoc3-receiver-name-{{order_id}}-{{ shipment.id }}">{{ text_name }}</label>
                            <div class="col-md-9">
                              {% if shipment.can_edit.sending_method_details %}
                              <input type="text" form="form-inpostoc3-order-shipping-{{ order_id }}-{{ shipment.id }}" required name="input-inpostoc3-receiver-name-{{order_id}}-{{ shipment.id }}" id="input-inpostoc3-receiver-name-{{order_id}}-{{ shipment.id }}" 
                              value="{{ shipment.receiver_id ? shipment.receiver.name : receiver.name }}" 
                              placeholder="{{ text_name }}"  class="form-control" style="width: 100%;" />
                              {% else %}
                              <span name="input-inpostoc3-receiver-name-{{order_id}}-{{ shipment.id }}" class="form-control">{{ shipment.receiver.name }}</span>
                              {% endif %}     
                            </div>
                          </div>
                          <div class="form-group row form-inline" style="border-top: 0px; padding-top: 5px; padding-bottom: 5px;">
                            <label class="col-md-3 control-label" for="input-inpostoc3-receiver-company-name-{{order_id}}-{{ shipment.id }}">{{ text_company_name }}</label>
                            <div class="col-md-9">
                              {% if shipment.can_edit.sending_method_details %}
                              <input type="text" form="form-inpostoc3-order-shipping-{{ order_id }}-{{ shipment.id }}" name="input-inpostoc3-receiver-company-name-{{order_id}}-{{ shipment.id }}" id="input-inpostoc3-receiver-company-name-{{order_id}}-{{ shipment.id }}" 
                              value="{{ shipment.receiver_id ? shipment.receiver.company_name : receiver.company_name }}"
                              placeholder="{{ text_company_name }}"  class="form-control" style="width: 100%;" />
                              {% else %}
                              <span name="input-inpostoc3-receiver-company-name-{{order_id}}-{{ shipment.id }}" class="form-control">{{ shipment.receiver.company_name }}</span>
                              {% endif %}                              
                            </div>
                          </div>
                          <div class="form-group row form-inline required" style="border-top: 0px; padding-top: 5px; padding-bottom: 5px;">
                            <label class="col-md-3 control-label" for="input-inpostoc3-receiver-first-name-{{order_id}}-{{ shipment.id }}">{{ text_first_name }}</label>
                            <div class="col-md-9">
                              {% if shipment.can_edit.sending_method_details %}
                              <input type="text" form="form-inpostoc3-order-shipping-{{ order_id }}-{{ shipment.id }}" required name="input-inpostoc3-receiver-first-name-{{order_id}}-{{ shipment.id }}" id="input-inpostoc3-receiver-first-name-{{order_id}}-{{ shipment.id }}" 
                              value="{{ shipment.receiver_id ? shipment.receiver.first_name : receiver.first_name }}"
                              placeholder="{{ text_first_name }}"  class="form-control" style="width: 100%;" />
                              {% else %}
                              <span name="input-inpostoc3-receiver-first-name-{{order_id}}-{{ shipment.id }}" class="form-control">{{ shipment.receiver.first_name }}</span>
                              {% endif %}                              
                            </div>
                          </div>
                          <div class="form-group row form-inline required" style="border-top: 0px; padding-top: 5px; padding-bottom: 5px;">
                            <label class="col-md-3 control-label" for="input-inpostoc3-receiver-last-name-{{order_id}}-{{ shipment.id }}">{{ text_last_name }}</label>
                            <div class="col-md-9">
                              {% if shipment.can_edit.sending_method_details %}
                              <input type="text" form="form-inpostoc3-order-shipping-{{ order_id }}-{{ shipment.id }}" required name="input-inpostoc3-receiver-last-name-{{order_id}}-{{ shipment.id }}" id="input-inpostoc3-receiver-last-name-{{order_id}}-{{ shipment.id }}" 
                              value="{{ shipment.receiver_id ? shipment.receiver.last_name : receiver.last_name }}"
                              placeholder="{{ text_last_name }}"  class="form-control" style="width: 100%;" />
                              {% else %}
                              <span name="input-inpostoc3-receiver-last-name-{{order_id}}-{{ shipment.id }}" class="form-control">{{ shipment.receiver.last_name }}</span>
                              {% endif %}                                  
                            </div>
                          </div>
                          <div class="form-group row form-inline required" style="border-top: 0px; padding-top: 5px; padding-bottom: 5px;">
                            <label class="col-md-3 control-label" for="input-inpostoc3-receiver-phone-{{order_id}}-{{ shipment.id }}">{{ text_phone }}</label>
                            <div class="col-md-9">
                              {% if shipment.can_edit.sending_method_details %}
                              <input type="text" form="form-inpostoc3-order-shipping-{{ order_id }}-{{ shipment.id }}" required name="input-inpostoc3-receiver-phone-{{order_id}}-{{ shipment.id }}" id="input-inpostoc3-receiver-phone-{{order_id}}-{{ shipment.id }}" 
                              value="{{ shipment.receiver_id ? shipment.receiver.phone : receiver.phone }}"
                              placeholder="{{ text_phone }}"  class="form-control" style="width: 100%;" />
                              {% else %}
                              <span name="input-inpostoc3-receiver-phone-{{order_id}}-{{ shipment.id }}" class="form-control">{{ shipment.receiver.phone }}</span>
                              {% endif %}                         
                            </div>
                          </div>
                          <div class="form-group row form-inline required" style="border-top: 0px; padding-top: 5px; padding-bottom: 5px;">
                            <label class="col-md-3 control-label" for="input-inpostoc3-receiver-email-{{order_id}}-{{ shipment.id }}">{{ text_email }}</label>
                            <div class="col-md-9">
                              {% if shipment.can_edit.sending_method_details %}
                              <input type="text" form="form-inpostoc3-order-shipping-{{ order_id }}-{{ shipment.id }}" required name="input-inpostoc3-receiver-email-{{order_id}}-{{ shipment.id }}" id="input-inpostoc3-receiver-email-{{order_id}}-{{ shipment.id }}" 
                              value="{{ shipment.receiver_id ? shipment.receiver.email : receiver.email }}"
                              placeholder="{{ text_email }}"  class="form-control" style="width: 100%;" />
                              {% else %}
                              <span name="input-inpostoc3-receiver-email-{{order_id}}-{{ shipment.id }}" class="form-control">{{ shipment.receiver.email }}</span>
                              {% endif %}                              
                            </div>                            
                          </div>
                          <div class="form-group row form-inline" style="border-top: 0px; padding-top: 5px; padding-bottom: 5px;">
                            <label class="col-md-3 control-label" for="input-inpostoc3-receiver-addr-street-{{order_id}}-{{ shipment.id }}">{{ text_addr_street }}</label>
                            <div class="col-md-9">
                              {% if shipment.can_edit.sending_method_details %}
                              <input type="text" form="form-inpostoc3-order-shipping-{{ order_id }}-{{ shipment.id }}" required name="input-inpostoc3-receiver-addr-street-{{order_id}}-{{ shipment.id }}" id="input-inpostoc3-receiver-addr-street-{{order_id}}-{{ shipment.id }}" 
                              value="{{ shipment.receiver_id ? shipment.receiver.street : receiver.street }}"
                              placeholder="{{ text_addr_street }}"  class="form-control" style="width: 100%;" />
                              {% else %}
                              <span name="input-inpostoc3-receiver-addr-street-{{order_id}}-{{ shipment.id }}" class="form-control">{{ shipment.receiver.street }}</span>
                              {% endif %}                              
                            </div>
                          </div>
                          <div class="form-group row form-inline" style="border-top: 0px; padding-top: 5px; padding-bottom: 5px;">
                            <label class="col-md-3 control-label" for="input-inpostoc3-receiver-addr-building-number-{{order_id}}-{{ shipment.id }}">{{ text_addr_building_number }}</label>
                            <div class="col-md-9">
                              {% if shipment.can_edit.sending_method_details %}
                              <input type="text" form="form-inpostoc3-order-shipping-{{ order_id }}-{{ shipment.id }}" required name="input-inpostoc3-receiver-addr-building-number-{{order_id}}-{{ shipment.id }}" id="input-inpostoc3-receiver-addr-building-number-{{order_id}}-{{ shipment.id }}" 
                              value="{{ shipment.receiver_id ? shipment.receiver.building_number : receiver.building_number }}" 
                              placeholder="{{ text_addr_building_number }}"  class="form-control" style="width: 100%;" />
                              {% else %}
                              <span name="input-inpostoc3-receiver-addr-building-number-{{order_id}}-{{ shipment.id }}" class="form-control">{{ shipment.receiver.building_number }}</span>
                              {% endif %}                                
                            </div>
                          </div>
                          <div class="form-group row form-inline" style="border-top: 0px; padding-top: 5px; padding-bottom: 5px;">
                            <label class="col-md-3 control-label" for="input-inpostoc3-receiver-addr-line-1-{{order_id}}-{{ shipment.id }}">{{ text_addr_line_1 }}</label>
                            <div class="col-md-9">
                              {% if shipment.can_edit.sending_method_details %}
                              <input type="text" form="form-inpostoc3-order-shipping-{{ order_id }}-{{ shipment.id }}" name="input-inpostoc3-receiver-addr-line-1-{{order_id}}-{{ shipment.id }}" id="input-inpostoc3-receiver-addr-line-1-{{order_id}}-{{ shipment.id }}" 
                              value="{{ shipment.receiver_id ? shipment.receiver.line1 : receiver.line1 }}" 
                              placeholder="{{ text_addr_line_1 }}"  class="form-control" style="width: 100%;" />
                              {% else %}
                              <span name="input-inpostoc3-receiver-addr-line-1-{{order_id}}-{{ shipment.id }}" class="form-control">{{ shipment.receiver.line1 }}</span>
                              {% endif %}                                
                            </div>
                          </div>
                          <div class="form-group row form-inline" style="border-top: 0px; padding-top: 5px; padding-bottom: 5px;">
                            <label class="col-md-3 control-label" for="input-inpostoc3-receiver-addr-line-2-{{order_id}}-{{ shipment.id }}">{{ text_addr_line_2 }}</label>
                            <div class="col-md-9">
                              {% if shipment.can_edit.sending_method_details %}
                              <input type="text" form="form-inpostoc3-order-shipping-{{ order_id }}-{{ shipment.id }}" name="input-inpostoc3-receiver-addr-line-2-{{order_id}}-{{ shipment.id }}" id="input-inpostoc3-receiver-addr-line-2-{{order_id}}-{{ shipment.id }}" 
                              value="{{ shipment.receiver_id ? shipment.receiver.line2 : receiver.line2 }}" 
                              placeholder="{{ text_addr_line_2 }}"  class="form-control" style="width: 100%;" />
                              {% else %}
                              <span name="input-inpostoc3-receiver-addr-line-2-{{order_id}}-{{ shipment.id }}" class="form-control">{{ shipment.receiver.line2 }}</span>
                              {% endif %}                                
                            </div>
                          </div>
                          <div class="form-group row form-inline required" style="border-top: 0px; padding-top: 5px; padding-bottom: 5px;">
                            <label class="col-md-3 control-label" for="input-inpostoc3-receiver-addr-city-{{order_id}}-{{ shipment.id }}">{{ text_addr_city }}</label>
                            <div class="col-md-9">
                              {% if shipment.can_edit.sending_method_details %}
                              <input type="text" form="form-inpostoc3-order-shipping-{{ order_id }}-{{ shipment.id }}" required name="input-inpostoc3-receiver-addr-city-{{order_id}}-{{ shipment.id }}" id="input-inpostoc3-receiver-addr-city-{{order_id}}-{{ shipment.id }}" 
                              value="{{ shipment.receiver_id ? shipment.receiver.city :  receiver.city }}" 
                              placeholder="{{ text_addr_city }}"  class="form-control" style="width: 100%;" />
                              {% else %}
                              <span name="input-inpostoc3-receiver-addr-city-{{order_id}}-{{ shipment.id }}" class="form-control">{{ shipment.receiver.city }}</span>
                              {% endif %}                               
                            </div>
                          </div>
                          <div class="form-group row form-inline" style="border-top: 0px; padding-top: 5px; padding-bottom: 5px;">
                            <label class="col-md-3 control-label" for="input-inpostoc3-receiver-addr-post-code-{{order_id}}-{{ shipment.id }}">{{ text_addr_post_code }}</label>
                            <div class="col-md-9">
                              {% if shipment.can_edit.sending_method_details %}
                              <input type="text" form="form-inpostoc3-order-shipping-{{ order_id }}-{{ shipment.id }}" name="input-inpostoc3-receiver-addr-post-code-{{order_id}}-{{ shipment.id }}" id="input-inpostoc3-receiver-addr-post-code-{{order_id}}-{{ shipment.id }}" 
                              value="{{ shipment.receiver_id ? shipment.receiver.post_code : receiver.post_code }}" 
                              placeholder="{{ text_addr_post_code }}"  class="form-control" style="width: 100%;" />
                              {% else %}
                              <span name="input-inpostoc3-receiver-addr-post-code-{{order_id}}-{{ shipment.id }}" class="form-control">{{ shipment.receiver.post_code }}</span>
                              {% endif %}                             
                            </div>
                          </div>
                          <div class="form-group row form-inline" style="border-top: 0px; padding-top: 5px; padding-bottom: 5px;">
                            <label class="col-md-3 control-label" for="input-inpostoc3-receiver-addr-country-code-{{order_id}}-{{ shipment.id }}">{{ text_addr_country_code }}</label>
                            <div class="col-md-9">
                              <span name="input-inpostoc3-receiver-addr-country-code-{{order_id}}-{{ shipment.id }}" class="form-control">{{ shipment.receiver.country_iso_code_2 }}</span>                             
                            </div>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>

                </td>

                

              </tr>
              <tr>

              </tr>
              <tr>
                <td colspan="2">
                  <table class="table table-md table-hover">
                    <thead>
                      <tr>
                        <td class="text-left">{{ text_template_description }}</td>
                        <td class="text-left">{{ text_parcel_number }}</td>
                        <td class="text-left">{{ text_parcel_tracking_number }}</td>
                        <td></td>
                      </tr>
                    </thead>
                    <tbody>
                      <!--for each parcel generate tr-->
                      {% for parcel in shipment.parcels %}
                      <tr>
                        <td class="text-left">
                          <div class="form-group row form-inline" style="border-top: 0px; padding-top: 5px; padding-bottom: 5px;">
                            <div class="col-md-12">
                              <select  name="input-inpostoc3-parcel-{{order_id}}-{{ shipment.id }}-{{ parcel.id }}" id="input-inpostoc3-parcel-{{order_id}}-{{ shipment.id }}-{{ parcel.id }}" class="form-control" style="width: 100%;">
                              <option value="0"
                              {% if not parcel.id %}
                              selected="selected"
                              {% endif %}
                              >{{ text_none }}</option>
                              
                              {% for parcel_template in parcel_templates %}
                              <option value="{{ parcel_template.id }}" 
                              {% if parcel.template_id is same as (parcel_template.id) %}
                              selected="selected"
                              {% endif %}
                              >{{ parcel_template.template_identifier }}</option>
                              {% endfor %}
                              </select>
                            </div>
                          </div>
                        </td>
                        <td class="text-left">{{ text_parcel_number }}

                        </td>
                        <td class="text-left">{{ text_parcel_tracking_number }}

                        </td>
                        <td></td>
                      </tr>
                      {% endfor %}
                      <!-- future: add as a last row in table ability to add parcels to shipment if this is not inpost_locker_service and not yet shipped/registered via API-->
                    </tbody>
                  </table>
                </td>
              </tr>
            </tbody>
          </table>

        </div>
        <!-- add ability to add another shipment to order in future, for orders split to a couple of shipments and shipment not registered yet via API-->
        {% endfor %}
      </div>
    </div>

    {% if inpostoc3_can_edit.shipment %}
    <form method="post" enctype="multipart/form-data" id="form-inpostoc3-order-shipping-{{ order_id }}" class="col-md-12">
    </form>
    {% endif %}

    {% endif %}
  </div>
</div>
{{ footer }}
